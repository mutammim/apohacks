<script>
  import Projects from "./Projects/Projects.svelte";
  import { fade } from "svelte/transition";
  import { inview } from "svelte-inview";

  let isInView;

  const futureDate = new Date();
  futureDate.setFullYear(futureDate.getFullYear() + 10);

  // TODO: TO BE CONFIRMED
  const respondDate = new Date("2024-02-28");
  const eventDate = new Date("2024-03-15");
</script>

<div class="-mt-6 h-12 rotate-1 border-t-8 border-accent2 bg-dark-bg"></div>

<section
  class="flex justify-center px-8 py-16 sm:py-32"
  use:inview={{ unobserveOnEnter: true, rootMargin: "-20%" }}
  on:change={({ detail }) => {
    isInView = detail.inView;
  }}
>
  {#if isInView}
    <div
      id="letter"
      class="flex max-w-5xl grow flex-col space-y-6 border-2 border-accent bg-primary-bg px-6 py-8 text-sm shadow-[16px_16px_rgba(0,0,0,0.3)] sm:space-y-10 sm:px-12 sm:py-8 sm:text-lg md:px-16 md:py-12"
    >
      <!-- ----------------------------- Letterhead ------------------------------ -->

      <div class="text-right text-xl leading-5 md:text-2xl md:leading-6">
        <p in:fade={{ delay: 500 }}>
          {futureDate.toLocaleDateString(undefined, {
            year: "numeric",
            month: "long",
            day: "numeric",
          })}
        </p>
        <p in:fade={{ delay: 700 }}>
          {Math.round((respondDate.valueOf() - Date.now()) / (24 * 60 * 60 * 1000))} days to
          respond
        </p>
        <p in:fade={{ delay: 900 }}>
          {Math.round((eventDate.valueOf() - Date.now()) / (24 * 60 * 60 * 1000))} days until
          event
        </p>
      </div>

      <!-- --------------------------- Letter Contents --------------------------- -->

      <div class="-mt-8 space-y-4 text-2xl leading-6 md:text-3xl md:leading-7">
        <p
          class="text-3xl italic drop-shadow-[0_0_8px_#FF5DA9] sm:pt-4 sm:text-4xl md:text-5xl"
          in:fade={{ duration: 2000, delay: 1400 }}
        >
          Greetings, hacker.
        </p>
        <p in:fade={{ delay: 3650 }}>
          Just a few months ago, the world fell into a zombie apocalypse. Itâ€™s absurd how
          fast society has been ravaged by the virus.
        </p>
        <p in:fade={{ delay: 5650 }}>
          Cities have turned to battlefields. Subways and schools have grown infected with
          the fallen.
        </p>
        <p class="italic drop-shadow-[0_0_4px_#FF5DA9]" in:fade={{ delay: 7650 }}>
          It's the beginning of the end.
        </p>
        <p in:fade={{ delay: 9650 }}>
          But one thing still stands: technology. WiFi is up, electricity runs, and
          hardware operates.
        </p>
      </div>

      <!-- ----------------------------- Letter CTA ------------------------------ -->

      <div class="justify-center py-4 sm:py-8">
        <div
          class="flex max-w-full grow flex-col gap-2 text-center text-white sm:gap-3 md:gap-4"
        >
          <p
            class="text-3xl leading-6 sm:text-4xl sm:leading-7 md:text-5xl md:leading-9"
            in:fade={{ delay: 11650, duration: 2000 }}
          >
            Join <span class="text-accent">150 hackers</span> like you for
            <span class="text-accent2">42 hours</span> at our safehouse.
          </p>

          <p
            class="text-3xl leading-6 text-white drop-shadow-[0_0_4px_#FF5DA9] sm:text-4xl sm:leading-7 md:text-5xl md:leading-9"
            in:fade={{ delay: 13650, duration: 2000 }}
          >
            Build something, <span class="italic">anything</span>, to help us survive this
            apocalypse.
          </p>
        </div>
      </div>

      <!-- <Projects client:load /> -->

      <div class="flex flex-col gap-4" in:fade={{ delay: 16650, duration: 1000 }}>
        <p class="text-2xl leading-6 md:text-3xl md:leading-8">
          So, what will you make? We can't wait to meet you.
        </p>

        <div class="md:py-4">
          <hr class="border-purple-200 shadow-inner" style="border-width: 1.5px;" />
        </div>

        <img
          src="https://cloud-j5rrrd6nd-hack-club-bot.vercel.app/1apo-signatures-10.png"
          alt="Signatures from Acon L, Mutammim S, Arav N, Sam L"
          class="w-64 self-center md:w-96"
        />
      </div>
    </div>
  {/if}
</section>

<style>
  #letter {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E"),
      linear-gradient(#5b21b6 0%, rgb(64 25 134) 100%);
  }
</style>
